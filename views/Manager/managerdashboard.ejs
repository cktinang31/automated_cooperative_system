<!DOCTYPE html>
<html lang="en">
    <%- include("../Manager/managerhead.ejs") %>
    <link rel="stylesheet" href="/css/managermain.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <body>
        <%- include("../Manager/managerheader.ejs") %>
        <%- include("../Manager/managersidebar.ejs") %>
   
        <div class="main-content">
            <div class="welcome-message">
                <p>Welcome, Manager  <%= user.fname %> <%= user.lname %>!</p>
                <p>Here, you can efficiently oversee member activities, manage loans and savings, and keep the cooperative thriving. Letâ€™s work together to ensure the success of our community!</p>
            </div>
    
            <!-- Dashboard Cards -->
            <div class="dashboard-cards">
                <div class="card members">
                    <h2>Members</h2>    
                    <p><%= totalRegularUsers %> Members</p>
                </div>
                <div class="card funds">
                    <h2>2024 Coop Funds</h2>
                    <ul>
                        <li>Cash and Equivalents</li>
                        <li>Expenses</li>
                        <li>Receivables</li>
                        <li>Fixed Assets</li>
                    </ul>
                </div>
            </div>
    
            <!-- Requests Table -->
            <div class="requests">
                <h3>Request</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Request ID</th>
                            <th>Request Type</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% if (requests.length > 0) { %>
                            <% requests.forEach(req => { %>
                                <tr onclick="openModal(
                                    '<%= req.id %>', 
                                    '<%= req.type %>', 
                                    '<%= req.fname %>', 
                                    '<%= req.lname %>', 
                                    '<%= req.mname %>',
                                    '<%= req.details %>', 
                                    '<%= req.amount %>', 
                                    '<%= req.loantype %>', 
                                    '<%= req.interest %>', 
                                    '<%= req.date %>', 
                                    '<%= req.dob %>', 
                                    '<%= req.pob %>', 
                                    '<%= req.address %>', 
                                    '<%= req.email %>', 
                                    '<%= req.contact %>', 
                                    '<%= req.user_id %>', 
                                    '<%= req.mode %>', 
                                    '<%= req.loanterm %>', 
                                    '<%= req.monthlypayment %>', 
                                    '<%= req.numberofpayments %>',
                                    '<%= req.application_status %>'
                                )">
                                    <td><%= req.id %></td>
                                    <td><%= req.type || '' %></td>
                                </tr>
                            <% }) %>
                        <% } else { %>
                            <tr>
                                <td colspan="2">No pending requests</td>
                            </tr>
                        <% } %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>    
    </body>
</html>
